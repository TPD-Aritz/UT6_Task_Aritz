<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/css_gif.gif" type="image/x-icon">
    <link rel="stylesheet" href="styles/form.css">
    <title>Form</title>
</head>
<body class="light">

    <nav>
        <ul>
            <li><a href="personalizer.html">Personalizer</a></li>
            <li><a href="form.html">Form</a></li>
            <li><a href="images.html">Images</a></li>
            <li><div onclick="darkmode()" id="mode">Mode</div></li>
        </ul>
    </nav>

    <div class="form-container">
        <form method="post">
          <div class="form-row">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" placeholder="Enter your full name">
          </div>
    
          <div class="form-row">
            <label for="email">Email:</label>
            <input type="text" id="email" name="email" placeholder="Enter your email">
          </div>

          <div class="form-row">
            <button type="button" onclick="checkemail()">Validate</button> 
            <div id="validEmail"></div>
          </div>

          <div class="form-row">
            <label>Gender:</label>
            <div class="form-group">
              <input type="radio" id="male" name="gender" value="male">
              <label for="male">Male</label>
    
              <input type="radio" id="female" name="gender" value="female">
              <label for="female">Female</label>
    
              <input type="radio" id="other" name="gender" value="other">
              <label for="other">Other</label>
            </div>
          </div>
    
    
          <div class="form-row">
            <label for="country">Country:</label>
            <select id="country" name="country" onchange="checkval('country')">
              <option value="">Select your country</option>
              <option value="eh">Euskal herria</option>
              <option value="esp">Spain</option>
              <option value="can">Canada</option>
            </select>
          </div>

          <div class="form-row" id="province-row">
            <select id="province" name="province" onchange="checkval('province')">

            </select>
          </div>

          <div class="form-row" id="town-row">
            <select id="town" name="town">

            </select>
          </div>
    
          <div class="form-row">
            <button type="submit" class="submit-btn">Send</button>
          </div>
        </form>
    </div>

</body>
<script>
  function darkmode(){
    document.body.className="dark";
    document.getElementById("mode").setAttribute("onClick","javascript: lightmode();");
  }

  function lightmode(){
    document.body.className="light";
    document.getElementById("mode").setAttribute("onClick","javascript: darkmode();");
  }

  function checkemail(){
    let text = document.getElementById("email").value;

    let pattern = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/

    if(text != ""){
      if (pattern.test(text)){
        document.getElementById("validEmail").innerHTML = text + " is a valid email address"
        document.getElementById("validEmail").style.color = "green";
      }else{
        document.getElementById("validEmail").innerHTML = text + " is not a valid email address"
        document.getElementById("validEmail").style.color = "red";
      }
    }else{
      document.getElementById("validEmail").innerHTML = "";
    }
  }

  function checkval(id){
    let val = document.getElementById(id).value
      if(id == "country" && val != ""){
        show('province',val);
      }else if(id == "province" && val != ""){
        show('town',val);
      }
  }

  function show(id,val){
    document.getElementById(id+"-row").style.display = "flex"
    
    switch(val){
    //Country

      case "eh":
      document.getElementById(id).innerHTML = "<option value=''>Select your province</option> <option value='eh1'>Nafarroa</option> <option value='eh2'>Bizkaia</option> <option value='eh3'>Gipuzkoa</option> <option value='eh4'>Araba</option>"
      break;
      case "esp":
      document.getElementById(id).innerHTML = "<option value=''>Select your province</option> <option value='esp1'>esp1</option> <option value='esp2'>esp2</option> <option value='esp3'>esp3</option> <option value='esp4'>esp4</option>"
      break;
      case "can":
      document.getElementById(id).innerHTML = "<option value=''>Select your province</option> <option value='na'>na1</option> <option value='esp'>na2</option> <option value='can'>na3</option> <option value='alb'>na4</option>"
      break;

    //EH

      //Nafarroa
      case "eh1":
      document.getElementById(id).innerHTML = "<option value=''>Select your town</option> <option value='abl'>Ablitas</option> <option value='Taf'>Tafalla</option> <option value='Pamp'>Iru√±a</option>"
      break;

      //Bizkaia
      case "eh2":
      document.getElementById(id).innerHTML = "<option value=''>Select your town</option> <option value='Bil'>Bilbao</option> <option value='Ger'>Gernika</option> <option value='Lek'>Lekeitio</option>"
      break;

      //Gipuzkoa
      case "eh3":
      document.getElementById(id).innerHTML = "<option value=''>Select your town</option> <option value='Don'>Donostia</option> <option value='Ger'>Gernika</option> <option value='Lek'>Lekeitio</option>"
      break;

      //Araba
      case "eh4":
      document.getElementById(id).innerHTML = "<option value=''>Select your town</option> <option value='Gaz'>Gazteiz</option> <option value='Ger'>Gernika</option> <option value='Lek'>Lekeitio</option>"
      break;
    }

    

  }
</script>
</html>